<mat-toolbar color="primary" style="position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
  <span>üõçÔ∏è Mi Tienda Pro</span>
  <span style="flex: 1 1 auto;"></span>
  
  <button mat-icon-button (click)="abrirCarrito()" style="margin-right: 10px;">
    <mat-icon aria-hidden="false" [matBadge]="cartService.getCount()" matBadgeColor="warn">
      shopping_cart
    </mat-icon>
  </button>
  
  <button mat-button (click)="onLogout()">
    <mat-icon>logout</mat-icon> Salir
  </button>
</mat-toolbar>

 <div style="text-align: center; margin-bottom: 20px;">
  <button mat-raised-button color="warn" (click)="probarSeguridad()">
    üö® Probar Seguridad (Demo Iv√°n)
  </button>
</div>

<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
  
  <h2 style="margin-bottom: 25px; color: #333; font-weight: 300;">
    Cat√°logo de Productos <small style="color: #666;">({{ productos.length }} art√≠culos)</small>
  </h2>

  <div *ngIf="productos.length === 0" style="text-align: center; margin-top: 50px;">
    <mat-spinner style="margin: 0 auto;"></mat-spinner>
    <p>Buscando en los estantes de DummyJSON... ‚è≥</p>
  </div>

  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; justify-items: center;">
    
    <mat-card *ngFor="let prod of productos" style="width: 100%; max-width: 320px; display: flex; flex-direction: column; justify-content: space-between; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
      
      <img mat-card-image [src]="prod.thumbnail" style="height: 200px; object-fit: contain; background: #f5f5f5; padding: 10px;">
      
      <mat-card-content style="padding: 16px; flex-grow: 1;">
        <h3 style="font-size: 1.1rem; margin-bottom: 8px; height: 2.4em; overflow: hidden; line-height: 1.2;">
          {{ prod.title }}
        </h3>
        <p style="font-size: 1.4rem; font-weight: bold; color: #2e7d32; margin: 0;">
          {{ prod.price }} ‚Ç¨
        </p>
      </mat-card-content>

      <mat-card-actions style="padding: 12px; border-top: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
        <button mat-flat-button color="accent" (click)="agregarAlCarrito(prod)">
          <mat-icon>add_shopping_cart</mat-icon> A√ëADIR
        </button>

        <div *ngIf="esAdmin" style="display: flex; gap: 4px;">
          <button mat-icon-button color="primary" (click)="onEdit(prod)" title="Editar producto">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="onDelete(prod.id)" title="Eliminar producto">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </mat-card-actions>

    </mat-card>

  </div>
</div>